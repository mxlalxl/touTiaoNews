{"remainingRequest":"D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\babel-loader\\lib\\index.js!D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\forward\\code\\vue\\hmtt_nnew\\src\\views\\Login\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\forward\\code\\vue\\hmtt_nnew\\src\\views\\Login\\index.vue","mtime":1664865225423},{"path":"D:\\forward\\code\\vue\\hmtt_nnew\\babel.config.js","mtime":1664795892678},{"path":"D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664795348110},{"path":"D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\babel-loader\\lib\\index.js","mtime":1663989856865},{"path":"D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664795348110},{"path":"D:\\forward\\code\\vue\\hmtt_nnew\\node_modules\\vue-loader\\lib\\index.js","mtime":1664795355419}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJ2YW50L2VzL25vdGlmeS9zdHlsZS9sZXNzIjsKaW1wb3J0IF9Ob3RpZnkgZnJvbSAidmFudC9lcy9ub3RpZnkiOwppbXBvcnQgeyBsb2dpbkFQSSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IHsgc2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL3Rva2VuLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgbW9iaWxlOiAiIiwKICAgICAgICAvL+aJi+acuuWPtwogICAgICAgIGNvZGU6ICIiIC8v5a+G56CBCgogICAgICB9LAogICAgICBpc2xvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIG9uU3VibWl0KHZhbHVlcykgewogICAgICAvLyBjb25zb2xlLmxvZygic3VibWl0IiwgdmFsdWVzKTsKICAgICAgLy8gY29uc29sZS5sb2codGhpcy51c2VyKTsKICAgICAgLy8g5oqK54q25oCB6K6+572u5Li6dHJ1ZQogICAgICB0aGlzLmlzbG9hZGluZyA9IHRydWU7CgogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGxvZ2luQVBJKHRoaXMudXNlcik7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICBzZXRUb2tlbihyZXMuZGF0YS5kYXRhLnRva2VuKTsgLy8g5oiQ5Yqf6YCa55+lCgogICAgICAgIF9Ob3RpZnkoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIueZu+W9leaIkOWKnyIKICAgICAgICB9KTsgLy8g6Lez6L2s5LiA5a6a6KaB5YaZ5Zyo5pyA5ZCO77yM5bC96YeP5pyA5ZCO5omn6KGMCiAgICAgICAgLy8gbG9jYXRpb24uaHJlZjrlvZPliY3mtY/op4jlmajlnLDlnYDlkozopoHot7PovaznmoTlnLDlnYDkuIDmoLfvvIjkuI3ljIXlkKvplJrngrkj5LmL5ZCO55qE5L+h5oGv77yJ77yM5LiN5Lya5Yi35paw572R6aG1CiAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goKSDljovmoIjvvIzkvJrkuqfnlJ/ljoblj7LorrDlvZXvvIzlj6/ku6Xlm57pgIAKICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucmVwbGFjZSgpIOabv+aNou+8jOS4jeS8muS6p+eUn+WOhuWPsuiusOW9lQoKCiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgcGF0aDogIi9sYXlvdXQvaG9tZSIgLy/lm6DkuLrmiJHku6zot6/nlLHop4TliJnph4xsYXlvdXTmsqHmnInph43lrprlkJHvvIzmiYDku6Xov5nph4zlhpnlhagKCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgLy8g5Y2x6Zmp6YCa55+lCiAgICAgICAgX05vdGlmeSh7CiAgICAgICAgICB0eXBlOiAiZGFuZ2VyIiwKICAgICAgICAgIG1lc3NhZ2U6ICLotKblj7fmiJblr4bnoIHplJnor68iCiAgICAgICAgfSk7CiAgICAgIH0gLy8g5peg6K66572R57uc6K+35rGC5oiQ5Yqf6L+Y5piv5aSx6LSl77yM5oqK5oyJ6ZKu54q25oCB5YWz5LqGCgoKICAgICAgdGhpcy5pc2xvYWRpbmcgPSBmYWxzZTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;AAyCA;AAEA;AACA;EACAA;IACA;MACAC;QACAC,UADA;QACA;QACAC,QAFA,CAEA;;MAFA,CADA;MAKAC;IALA;EAOA,CATA;;EAUAC;IACA;MACA;MACA;MACA;MACA;;MAEA;QACA;QACAC;QACAC,8BAHA,CAIA;;QACA;UAAAC;UAAAC;QAAA,GALA,CAMA;QACA;QACA;QACA;;;QACA;UACAC,oBADA,CACA;;QADA;MAGA,CAbA,CAaA;QACA;QACA;UAAAF;UAAAC;QAAA;MACA,CAtBA,CAuBA;;;MACA;IACA;;EA1BA;AAVA","names":["data","user","mobile","code","isloading","methods","console","setToken","type","message","path"],"sourceRoot":"src/views/Login","sources":["index.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 导航栏 -->\n    <van-nav-bar title=\"黑马头条-登录\" />\n    <!-- /导航栏 -->\n\n    <!-- 登录表单 -->\n    <van-form @submit=\"onSubmit\">\n      <van-field\n        v-model=\"user.mobile\"\n        required\n        name=\"mobile\"\n        label=\"手机号\"\n        placeholder=\"请输入11位手机号\"\n        :rules=\"[{ required: true, message: '请填写正确的手机号',pattern:/^1[3-9]\\d{9}$/ }]\"\n      />\n      <van-field\n        v-model=\"user.code\"\n        required\n        type=\"password\"\n        name=\"code\"\n        label=\"密码\"\n        placeholder=\"请输入6位密码\"\n        :rules=\"[{ required: true, message: '请填写密码',pattern: /^\\d{6}$/ }]\"\n      />\n      <div style=\"margin: 16px;\">\n        <van-button\n          round\n          block\n          type=\"info\"\n          native-type=\"submit\"\n          :loading=\"isloading\"\n          loading-text=\"正在登录中...\"\n          :disabled=\"isloading\"\n        >登录</van-button>\n      </div>\n    </van-form>\n  </div>\n</template>\n\n<script>\nimport { loginAPI } from \"@/api\";\nimport { Notify } from \"vant\";\nimport { setToken } from \"@/utils/token.js\";\nexport default {\n  data() {\n    return {\n      user: {\n        mobile: \"\", //手机号\n        code: \"\" //密码\n      },\n      isloading: false\n    };\n  },\n  methods: {\n    async onSubmit(values) {\n      // console.log(\"submit\", values);\n      // console.log(this.user);\n      // 把状态设置为true\n      this.isloading = true;\n\n      try {\n        const res = await loginAPI(this.user);\n        console.log(res);\n        setToken(res.data.data.token);\n        // 成功通知\n        Notify({ type: \"success\", message: \"登录成功\" });\n        // 跳转一定要写在最后，尽量最后执行\n        // location.href:当前浏览器地址和要跳转的地址一样（不包含锚点#之后的信息），不会刷新网页\n        // this.$router.push() 压栈，会产生历史记录，可以回退\n        // this.$router.replace() 替换，不会产生历史记录\n        this.$router.replace({\n          path: \"/layout/home\" //因为我们路由规则里layout没有重定向，所以这里写全\n        });\n      } catch (error) {\n        // 危险通知\n        Notify({ type: \"danger\", message: \"账号或密码错误\" });\n      }\n      // 无论网络请求成功还是失败，把按钮状态关了\n      this.isloading = false;\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"less\">\n.van-nav-bar {\n  background-color: #007bff;\n}\n\n/deep/ .van-nav-bar__title {\n  color: white;\n}\n</style>\n"]}]}